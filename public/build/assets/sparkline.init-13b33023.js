(function(R,n,h){(function(o){typeof define=="function"&&define.amd?define(["jquery"],o):jQuery&&!jQuery.fn.sparkline&&o(jQuery)})(function(o){var y={},K,k,I,F,G,O,X,N,D,Y,U,ht,gt,J,pt,ct,M,Z,ft,ut,dt,tt,it,et,mt,vt,xt,rt,st,at,P,yt=0;K=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:h,normalRangeMax:h,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:h,chartRangeMax:h,chartRangeMinX:h,chartRangeMaxX:h,tooltipFormat:new I('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:h,nullColor:h,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:h,chartRangeMin:h,chartRangeClip:!1,colorMap:h,tooltipFormat:new I('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new I('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:h,thresholdValue:0,chartRangeMax:h,chartRangeMin:h,chartRangeClip:!1,tooltipFormat:new I("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:h,tooltipFormat:new I("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new I('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:h,targetColor:"#4a2",chartRangeMax:h,chartRangeMin:h,tooltipFormat:new I("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},mt='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;box-sizing: content-box;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',k=function(){var t,i;return t=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(t.prototype=o.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],arguments.length>2&&(i=Array.prototype.slice.call(arguments,1,-1),i.unshift(t.prototype),o.extend.apply(o,i))):t.prototype=arguments[0],t.prototype.cls=t,t},o.SPFormatClass=I=k({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(t,i){this.format=t,this.fclass=i},render:function(t,i,e){var r=this,a=t,s,l,p,g,c;return this.format.replace(this.fre,function(){var f;return l=arguments[1],p=arguments[3],s=r.precre.exec(l),s?(c=s[2],l=s[1]):c=!1,g=a[l],g===h?"":p&&i&&i[p]?(f=i[p],f.get?i[p].get(g)||g:i[p][g]||g):(D(g)&&(e.get("numberFormatter")?g=e.get("numberFormatter")(g):g=gt(g,c,e.get("numberDigitGroupCount"),e.get("numberDigitGroupSep"),e.get("numberDecimalMark"))),g)})}}),o.spformat=function(t,i){return new I(t,i)},F=function(t,i,e){return t<i?i:t>e?e:t},G=function(t,i){var e;return i===2?(e=n.floor(t.length/2),t.length%2?t[e]:(t[e-1]+t[e])/2):t.length%2?(e=(t.length*i+i)/4,e%1?(t[n.floor(e)]+t[n.floor(e)-1])/2:t[e-1]):(e=(t.length*i+2)/4,e%1?(t[n.floor(e)]+t[n.floor(e)-1])/2:t[e-1])},O=function(t){var i;switch(t){case"undefined":t=h;break;case"null":t=null;break;case"true":t=!0;break;case"false":t=!1;break;default:i=parseFloat(t),t==i&&(t=i)}return t},X=function(t){var i,e=[];for(i=t.length;i--;)e[i]=O(t[i]);return e},N=function(t,i){var e,r,a=[];for(e=0,r=t.length;e<r;e++)t[e]!==i&&a.push(t[e]);return a},D=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},gt=function(t,i,e,r,a){var s,l;for(t=(i===!1?parseFloat(t).toString():t.toFixed(i)).split(""),s=(s=o.inArray(".",t))<0?t.length:s,s<t.length&&(t[s]=a),l=s-e;l>0;l-=e)t.splice(l,0,r);return t.join("")},Y=function(t,i,e){var r;for(r=i.length;r--;)if(!(e&&i[r]===null)&&i[r]!==t)return!1;return!0},ht=function(t){return o.isArray(t)?t:[t]},U=function(t){var i,e;if(R.createStyleSheet)try{R.createStyleSheet().cssText=t;return}catch{e=!0}i=R.createElement("style"),i.type="text/css",R.getElementsByTagName("head")[0].appendChild(i),e?R.styleSheets[R.styleSheets.length-1].cssText=t:i[typeof R.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=t},o.fn.simpledraw=function(t,i,e,r){var a,s;if(e&&(a=this.data("_jqs_vcanvas")))return a;if(o.fn.sparkline.canvas===!1)return!1;if(o.fn.sparkline.canvas===h){var l=R.createElement("canvas");if(l.getContext&&l.getContext("2d"))o.fn.sparkline.canvas=function(p,g,c,f){return new st(p,g,c,f)};else if(R.namespaces&&!R.namespaces.v)R.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),o.fn.sparkline.canvas=function(p,g,c,f){return new at(p,g,c)};else return o.fn.sparkline.canvas=!1,!1}return t===h&&(t=o(this).innerWidth()),i===h&&(i=o(this).innerHeight()),a=o.fn.sparkline.canvas(t,i,this,r),s=o(this).data("_jqs_mhandler"),s&&s.registerCanvas(a),a},o.fn.cleardraw=function(){var t=this.data("_jqs_vcanvas");t&&t.reset()},o.RangeMapClass=J=k({init:function(t){var i,e,r=[];for(i in t)t.hasOwnProperty(i)&&typeof i=="string"&&i.indexOf(":")>-1&&(e=i.split(":"),e[0]=e[0].length===0?-1/0:parseFloat(e[0]),e[1]=e[1].length===0?1/0:parseFloat(e[1]),e[2]=t[i],r.push(e));this.map=t,this.rangelist=r||!1},get:function(t){var i=this.rangelist,e,r,a;if((a=this.map[t])!==h)return a;if(i){for(e=i.length;e--;)if(r=i[e],r[0]<=t&&r[1]>=t)return r[2]}return h}}),o.range_map=function(t){return new J(t)},pt=k({init:function(t,i){var e=o(t);this.$el=e,this.options=i,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!i.get("disableTooltips"),this.highlightEnabled=!i.get("disableHighlight")},registerSparkline:function(t){this.splist.push(t),this.over&&this.updateDisplay()},registerCanvas:function(t){var i=o(t.canvas);this.canvas=t,this.$canvas=i,i.mouseenter(o.proxy(this.mouseenter,this)),i.mouseleave(o.proxy(this.mouseleave,this)),i.click(o.proxy(this.mouseclick,this))},reset:function(t){this.splist=[],this.tooltip&&t&&(this.tooltip.remove(),this.tooltip=h)},mouseclick:function(t){var i=o.Event("sparklineClick");i.originalEvent=t,i.sparklines=this.splist,this.$el.trigger(i)},mouseenter:function(t){o(R.body).unbind("mousemove.jqs"),o(R.body).bind("mousemove.jqs",o.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new ct(this.options),this.tooltip.updatePosition(t.pageX,t.pageY)),this.updateDisplay()},mouseleave:function(){o(R.body).unbind("mousemove.jqs");var t=this.splist,i=t.length,e=!1,r,a;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),a=0;a<i;a++)r=t[a],r.clearRegionHighlight()&&(e=!0);e&&this.canvas.render()},mousemove:function(t){this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,this.tooltip&&this.tooltip.updatePosition(t.pageX,t.pageY),this.updateDisplay()},updateDisplay:function(){var t=this.splist,i=t.length,e=!1,r=this.$canvas.offset(),a=this.currentPageX-r.left,s=this.currentPageY-r.top,l,p,g,c,f;if(this.over){for(g=0;g<i;g++)p=t[g],c=p.setRegionHighlight(this.currentEl,a,s),c&&(e=!0);if(e){if(f=o.Event("sparklineRegionChange"),f.sparklines=this.splist,this.$el.trigger(f),this.tooltip){for(l="",g=0;g<i;g++)p=t[g],l+=p.getCurrentRegionTooltip();this.tooltip.setContent(l)}this.disableHighlight||this.canvas.render()}c===null&&this.mouseleave()}}}),ct=k({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var i=t.get("tooltipClassname","jqstooltip"),e=this.sizeStyle,r;this.container=t.get("tooltipContainer")||R.body,this.tooltipOffsetX=t.get("tooltipOffsetX",10),this.tooltipOffsetY=t.get("tooltipOffsetY",12),o("#jqssizetip").remove(),o("#jqstooltip").remove(),this.sizetip=o("<div/>",{id:"jqssizetip",style:e,class:i}),this.tooltip=o("<div/>",{id:"jqstooltip",class:i}).appendTo(this.container),r=this.tooltip.offset(),this.offsetLeft=r.left,this.offsetTop=r.top,this.hidden=!0,o(window).unbind("resize.jqs scroll.jqs"),o(window).bind("resize.jqs scroll.jqs",o.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=o(window).scrollTop(),this.scrollLeft=o(window).scrollLeft(),this.scrollRight=this.scrollLeft+o(window).width(),this.updatePosition()},getSize:function(t){this.sizetip.html(t).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(t){if(!t){this.tooltip.css("visibility","hidden"),this.hidden=!0;return}this.getSize(t),this.tooltip.html(t).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(t,i){if(t===h){if(this.mousex===h)return;t=this.mousex-this.offsetLeft,i=this.mousey-this.offsetTop}else this.mousex=t=t-this.offsetLeft,this.mousey=i=i-this.offsetTop;!this.height||!this.width||this.hidden||(i-=this.height+this.tooltipOffsetY,t+=this.tooltipOffsetX,i<this.scrollTop&&(i=this.scrollTop),t<this.scrollLeft?t=this.scrollLeft:t+this.width>this.scrollRight&&(t=this.scrollRight-this.width),this.tooltip.css({left:t,top:i}))},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=h,o(window).unbind("resize.jqs scroll.jqs")}}),vt=function(){U(mt)},o(vt),P=[],o.fn.sparkline=function(t,i){return this.each(function(){var e=new o.fn.sparkline.options(this,i),r=o(this),a,s;if(a=function(){var l,p,g,c,f,v,m;if(t==="html"||t===h?(m=this.getAttribute(e.get("tagValuesAttribute")),(m===h||m===null)&&(m=r.html()),l=m.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):l=t,p=e.get("width")==="auto"?l.length*e.get("defaultPixelsPerValue"):e.get("width"),e.get("height")==="auto"?(!e.get("composite")||!o.data(this,"_jqs_vcanvas"))&&(c=R.createElement("span"),c.innerHTML="a",r.html(c),g=o(c).innerHeight()||o(c).height(),o(c).remove(),c=null):g=e.get("height"),e.get("disableInteraction")?f=!1:(f=o.data(this,"_jqs_mhandler"),f?e.get("composite")||f.reset():(f=new pt(this,e),o.data(this,"_jqs_mhandler",f))),e.get("composite")&&!o.data(this,"_jqs_vcanvas")){o.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),o.data(this,"_jqs_errnotify",!0));return}v=new o.fn.sparkline[e.get("type")](this,l,e,p,g),v.render(),f&&f.registerSparkline(v)},o(this).html()&&!e.get("disableHiddenCheck")&&o(this).is(":hidden")||!o(this).parents("body").length){if(!e.get("composite")&&o.data(this,"_jqs_pending"))for(s=P.length;s;s--)P[s-1][0]==this&&P.splice(s-1,1);P.push([this,a]),o.data(this,"_jqs_pending",!0)}else a.call(this)})},o.fn.sparkline.defaults=K(),o.sparkline_display_visible=function(){var t,i,e,r=[];for(i=0,e=P.length;i<e;i++)t=P[i][0],o(t).is(":visible")&&!o(t).parents().is(":hidden")?(P[i][1].call(t),o.data(P[i][0],"_jqs_pending",!1),r.push(i)):!o(t).closest("html").length&&!o.data(t,"_jqs_pending")&&(o.data(P[i][0],"_jqs_pending",!1),r.push(i));for(i=r.length;i;i--)P.splice(r[i-1],1)},o.fn.sparkline.options=k({init:function(t,i){var e,r,a,s;this.userOptions=i=i||{},this.tag=t,this.tagValCache={},r=o.fn.sparkline.defaults,a=r.common,this.tagOptionsPrefix=i.enableTagOptions&&(i.tagOptionsPrefix||a.tagOptionsPrefix),s=this.getTagSetting("type"),s===y?e=r[i.type||a.type]:e=r[s],this.mergedOptions=o.extend({},a,e,i)},getTagSetting:function(t){var i=this.tagOptionsPrefix,e,r,a,s;if(i===!1||i===h)return y;if(this.tagValCache.hasOwnProperty(t))e=this.tagValCache.key;else{if(e=this.tag.getAttribute(i+t),e===h||e===null)e=y;else if(e.substr(0,1)==="[")for(e=e.substr(1,e.length-2).split(","),r=e.length;r--;)e[r]=O(e[r].replace(/(^\s*)|(\s*$)/g,""));else if(e.substr(0,1)==="{")for(a=e.substr(1,e.length-2).split(","),e={},r=a.length;r--;)s=a[r].split(":",2),e[s[0].replace(/(^\s*)|(\s*$)/g,"")]=O(s[1].replace(/(^\s*)|(\s*$)/g,""));else e=O(e);this.tagValCache.key=e}return e},get:function(t,i){var e=this.getTagSetting(t),r;return e!==y?e:(r=this.mergedOptions[t])===h?i:r}}),o.fn.sparkline._base=k({disabled:!1,init:function(t,i,e,r,a){this.el=t,this.$el=o(t),this.values=i,this.options=e,this.width=r,this.height=a,this.currentRegion=h},initTarget:function(){var t=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),t))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(t,i){},setRegionHighlight:function(t,i,e){var r=this.currentRegion,a=!this.options.get("disableHighlight"),s;return i>this.canvasWidth||e>this.canvasHeight||i<0||e<0?null:(s=this.getRegion(t,i,e),r!==s?(r!==h&&a&&this.removeHighlight(),this.currentRegion=s,s!==h&&a&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==h?(this.removeHighlight(),this.currentRegion=h,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(t){},getCurrentRegionTooltip:function(){var t=this.options,i="",e=[],r,a,s,l,p,g,c,f,v,m,u,x,C,w;if(this.currentRegion===h)return"";if(r=this.getCurrentRegionFields(),u=t.get("tooltipFormatter"),u)return u(this,t,r);if(t.get("tooltipChartTitle")&&(i+='<div class="jqs jqstitle">'+t.get("tooltipChartTitle")+`</div>
`),a=this.options.get("tooltipFormat"),!a)return"";if(o.isArray(a)||(a=[a]),o.isArray(r)||(r=[r]),c=this.options.get("tooltipFormatFieldlist"),f=this.options.get("tooltipFormatFieldlistKey"),c&&f){for(v=[],g=r.length;g--;)m=r[g][f],(w=o.inArray(m,c))!=-1&&(v[w]=r[g]);r=v}for(s=a.length,C=r.length,g=0;g<s;g++)for(x=a[g],typeof x=="string"&&(x=new I(x)),l=x.fclass||"jqsfield",w=0;w<C;w++)(!r[w].isNull||!t.get("tooltipSkipNull"))&&(o.extend(r[w],{prefix:t.get("tooltipPrefix"),suffix:t.get("tooltipSuffix")}),p=x.render(r[w],t.get("tooltipValueLookups"),t),e.push('<div class="'+l+'">'+p+"</div>"));return e.length?i+e.join(`
`):""},getCurrentRegionFields:function(){},calcHighlightColor:function(t,i){var e=i.get("highlightColor"),r=i.get("highlightLighten"),a,s,l,p;if(e)return e;if(r&&(a=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t),a)){for(l=[],s=t.length===4?16:1,p=0;p<3;p++)l[p]=F(n.round(parseInt(a[p+1],16)*s*r),0,255);return"rgb("+l.join(",")+")"}return t}}),M={changeHighlight:function(t){var i=this.currentRegion,e=this.target,r=this.regionShapes[i],a;r&&(a=this.renderRegion(i,t),o.isArray(a)||o.isArray(r)?(e.replaceWithShapes(r,a),this.regionShapes[i]=o.map(a,function(s){return s.id})):(e.replaceWithShape(r,a),this.regionShapes[i]=a.id))},render:function(){var t=this.values,i=this.target,e=this.regionShapes,r,a,s,l;if(this.cls._super.render.call(this)){for(s=t.length;s--;)if(r=this.renderRegion(s),r)if(o.isArray(r)){for(a=[],l=r.length;l--;)r[l].append(),a.push(r[l].id);e[s]=a}else r.append(),e[s]=r.id;else e[s]=null;i.render()}}},o.fn.sparkline.line=Z=k(o.fn.sparkline._base,{type:"line",init:function(t,i,e,r,a){Z._super.init.call(this,t,i,e,r,a),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(t,i,e){var r,a=this.regionMap;for(r=a.length;r--;)if(a[r]!==null&&i>=a[r][0]&&i<=a[r][1])return a[r][2];return h},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.yvalues[t]===null,x:this.xvalues[t],y:this.yvalues[t],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:t}},renderHighlight:function(){var t=this.currentRegion,i=this.target,e=this.vertices[t],r=this.options,a=r.get("spotRadius"),s=r.get("highlightSpotColor"),l=r.get("highlightLineColor"),p,g;e&&(a&&s&&(p=i.drawCircle(e[0],e[1],a,h,s),this.highlightSpotId=p.id,i.insertAfterShape(this.lastShapeId,p)),l&&(g=i.drawLine(e[0],this.canvasTop,e[0],this.canvasTop+this.canvasHeight,l),this.highlightLineId=g.id,i.insertAfterShape(this.lastShapeId,g)))},removeHighlight:function(){var t=this.target;this.highlightSpotId&&(t.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(t.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t=this.values,i=t.length,e=this.xvalues,r=this.yvalues,a=this.yminmax,s,l,p,g,c;for(s=0;s<i;s++)l=t[s],p=typeof t[s]=="string",g=typeof t[s]=="object"&&t[s]instanceof Array,c=p&&t[s].split(":"),p&&c.length===2?(e.push(Number(c[0])),r.push(Number(c[1])),a.push(Number(c[1]))):g?(e.push(l[0]),r.push(l[1]),a.push(l[1])):(e.push(s),t[s]===null||t[s]==="null"?r.push(null):(r.push(Number(l)),a.push(Number(l))));this.options.get("xvalues")&&(e=this.options.get("xvalues")),this.maxy=this.maxyorg=n.max.apply(n,a),this.miny=this.minyorg=n.min.apply(n,a),this.maxx=n.max.apply(n,e),this.minx=n.min.apply(n,e),this.xvalues=e,this.yvalues=r,this.yminmax=a},processRangeOptions:function(){var t=this.options,i=t.get("normalRangeMin"),e=t.get("normalRangeMax");i!==h&&(i<this.miny&&(this.miny=i),e>this.maxy&&(this.maxy=e)),t.get("chartRangeMin")!==h&&(t.get("chartRangeClip")||t.get("chartRangeMin")<this.miny)&&(this.miny=t.get("chartRangeMin")),t.get("chartRangeMax")!==h&&(t.get("chartRangeClip")||t.get("chartRangeMax")>this.maxy)&&(this.maxy=t.get("chartRangeMax")),t.get("chartRangeMinX")!==h&&(t.get("chartRangeClipX")||t.get("chartRangeMinX")<this.minx)&&(this.minx=t.get("chartRangeMinX")),t.get("chartRangeMaxX")!==h&&(t.get("chartRangeClipX")||t.get("chartRangeMaxX")>this.maxx)&&(this.maxx=t.get("chartRangeMaxX"))},drawNormalRange:function(t,i,e,r,a){var s=this.options.get("normalRangeMin"),l=this.options.get("normalRangeMax"),p=i+n.round(e-e*((l-this.miny)/a)),g=n.round(e*(l-s)/a);this.target.drawRect(t,p,r,g,h,this.options.get("normalRangeColor")).append()},render:function(){var t=this.options,i=this.target,e=this.canvasWidth,r=this.canvasHeight,a=this.vertices,s=t.get("spotRadius"),l=this.regionMap,p,g,c,f,v,m,u,x,C,w,b,_,S,j,W,T,q,E,V,L,z,A,B,H,d;if(Z._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),B=this.xvalues,H=this.yvalues,!(!this.yminmax.length||this.yvalues.length<2))){for(f=v=0,p=this.maxx-this.minx===0?1:this.maxx-this.minx,g=this.maxy-this.miny===0?1:this.maxy-this.miny,c=this.yvalues.length-1,s&&(e<s*4||r<s*4)&&(s=0),s&&(z=t.get("highlightSpotColor")&&!t.get("disableInteraction"),(z||t.get("minSpotColor")||t.get("spotColor")&&H[c]===this.miny)&&(r-=n.ceil(s)),(z||t.get("maxSpotColor")||t.get("spotColor")&&H[c]===this.maxy)&&(r-=n.ceil(s),f+=n.ceil(s)),(z||(t.get("minSpotColor")||t.get("maxSpotColor"))&&(H[0]===this.miny||H[0]===this.maxy))&&(v+=n.ceil(s),e-=n.ceil(s)),(z||t.get("spotColor")||t.get("minSpotColor")||t.get("maxSpotColor")&&(H[c]===this.miny||H[c]===this.maxy))&&(e-=n.ceil(s))),r--,t.get("normalRangeMin")!==h&&!t.get("drawNormalOnTop")&&this.drawNormalRange(v,f,r,e,g),u=[],x=[u],j=W=null,T=H.length,d=0;d<T;d++)C=B[d],b=B[d+1],w=H[d],_=v+n.round((C-this.minx)*(e/p)),S=d<T-1?v+n.round((b-this.minx)*(e/p)):e,W=_+(S-_)/2,l[d]=[j||0,W,d],j=W,w===null?d&&(H[d-1]!==null&&(u=[],x.push(u)),a.push(null)):(w<this.miny&&(w=this.miny),w>this.maxy&&(w=this.maxy),u.length||u.push([_,f+r]),m=[_,f+n.round(r-r*((w-this.miny)/g))],u.push(m),a.push(m));for(q=[],E=[],V=x.length,d=0;d<V;d++)u=x[d],u.length&&(t.get("fillColor")&&(u.push([u[u.length-1][0],f+r]),E.push(u.slice(0)),u.pop()),u.length>2&&(u[0]=[u[0][0],u[1][1]]),q.push(u));for(V=E.length,d=0;d<V;d++)i.drawShape(E[d],t.get("fillColor"),t.get("fillColor")).append();for(t.get("normalRangeMin")!==h&&t.get("drawNormalOnTop")&&this.drawNormalRange(v,f,r,e,g),V=q.length,d=0;d<V;d++)i.drawShape(q[d],t.get("lineColor"),h,t.get("lineWidth")).append();if(s&&t.get("valueSpots"))for(L=t.get("valueSpots"),L.get===h&&(L=new J(L)),d=0;d<T;d++)A=L.get(H[d]),A&&i.drawCircle(v+n.round((B[d]-this.minx)*(e/p)),f+n.round(r-r*((H[d]-this.miny)/g)),s,h,A).append();s&&t.get("spotColor")&&H[c]!==null&&i.drawCircle(v+n.round((B[B.length-1]-this.minx)*(e/p)),f+n.round(r-r*((H[c]-this.miny)/g)),s,h,t.get("spotColor")).append(),this.maxy!==this.minyorg&&(s&&t.get("minSpotColor")&&(C=B[o.inArray(this.minyorg,H)],i.drawCircle(v+n.round((C-this.minx)*(e/p)),f+n.round(r-r*((this.minyorg-this.miny)/g)),s,h,t.get("minSpotColor")).append()),s&&t.get("maxSpotColor")&&(C=B[o.inArray(this.maxyorg,H)],i.drawCircle(v+n.round((C-this.minx)*(e/p)),f+n.round(r-r*((this.maxyorg-this.miny)/g)),s,h,t.get("maxSpotColor")).append())),this.lastShapeId=i.getLastShapeId(),this.canvasTop=f,i.render()}}}),o.fn.sparkline.bar=ft=k(o.fn.sparkline._base,M,{type:"bar",init:function(t,i,e,r,a){var s=parseInt(e.get("barWidth"),10),l=parseInt(e.get("barSpacing"),10),p=e.get("chartRangeMin"),g=e.get("chartRangeMax"),c=e.get("chartRangeClip"),f=1/0,v=-1/0,m,u,x,C,w,b,_,S,j,W,T,q,E,V,L,z,A,B,H,d,Q,Ct;for(ft._super.init.call(this,t,i,e,r,a),b=0,_=i.length;b<_;b++)d=i[b],m=typeof d=="string"&&d.indexOf(":")>-1,(m||o.isArray(d))&&(L=!0,m&&(d=i[b]=X(d.split(":"))),d=N(d,null),u=n.min.apply(n,d),x=n.max.apply(n,d),u<f&&(f=u),x>v&&(v=x));this.stacked=L,this.regionShapes={},this.barWidth=s,this.barSpacing=l,this.totalBarWidth=s+l,this.width=r=i.length*s+(i.length-1)*l,this.initTarget(),c&&(E=p===h?-1/0:p,V=g===h?1/0:g),w=[],C=L?[]:w;var ot=[],lt=[];for(b=0,_=i.length;b<_;b++)if(L)for(z=i[b],i[b]=H=[],ot[b]=0,C[b]=lt[b]=0,A=0,B=z.length;A<B;A++)d=H[A]=c?F(z[A],E,V):z[A],d!==null&&(d>0&&(ot[b]+=d),f<0&&v>0?d<0?lt[b]+=n.abs(d):C[b]+=d:C[b]+=n.abs(d-(d<0?v:f)),w.push(d));else d=c?F(i[b],E,V):i[b],d=i[b]=O(d),d!==null&&w.push(d);this.max=q=n.max.apply(n,w),this.min=T=n.min.apply(n,w),this.stackMax=v=L?n.max.apply(n,ot):q,this.stackMin=f=L?n.min.apply(n,w):T,e.get("chartRangeMin")!==h&&(e.get("chartRangeClip")||e.get("chartRangeMin")<T)&&(T=e.get("chartRangeMin")),e.get("chartRangeMax")!==h&&(e.get("chartRangeClip")||e.get("chartRangeMax")>q)&&(q=e.get("chartRangeMax")),this.zeroAxis=j=e.get("zeroAxis",!0),T<=0&&q>=0&&j?W=0:j==!1||T>0?W=T:W=q,this.xaxisOffset=W,S=L?n.max.apply(n,C)+n.max.apply(n,lt):q-T,this.canvasHeightEf=j&&T<0?this.canvasHeight-2:this.canvasHeight-1,T<W?(Ct=L&&q>=0?v:q,Q=(Ct-W)/S*this.canvasHeight,Q!==n.ceil(Q)&&(this.canvasHeightEf-=2,Q=n.ceil(Q))):Q=this.canvasHeight,this.yoffset=Q,o.isArray(e.get("colorMap"))?(this.colorMapByIndex=e.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=e.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===h&&(this.colorMapByValue=new J(this.colorMapByValue))),this.range=S},getRegion:function(t,i,e){var r=n.floor(i/this.totalBarWidth);return r<0||r>=this.values.length?h:r},getCurrentRegionFields:function(){var t=this.currentRegion,i=ht(this.values[t]),e=[],r,a;for(a=i.length;a--;)r=i[a],e.push({isNull:r===null,value:r,color:this.calcColor(a,r,t),offset:t});return e},calcColor:function(t,i,e){var r=this.colorMapByIndex,a=this.colorMapByValue,s=this.options,l,p;return this.stacked?l=s.get("stackedBarColor"):l=i<0?s.get("negBarColor"):s.get("barColor"),i===0&&s.get("zeroColor")!==h&&(l=s.get("zeroColor")),a&&(p=a.get(i))?l=p:r&&r.length>e&&(l=r[e]),o.isArray(l)?l[t%l.length]:l},renderRegion:function(t,i){var e=this.values[t],r=this.options,a=this.xaxisOffset,s=[],l=this.range,p=this.stacked,g=this.target,c=t*this.totalBarWidth,f=this.canvasHeightEf,v=this.yoffset,m,u,x,C,w,b,_,S,j,W;if(e=o.isArray(e)?e:[e],_=e.length,S=e[0],C=Y(null,e),W=Y(a,e,!0),C)return r.get("nullColor")?(x=i?r.get("nullColor"):this.calcHighlightColor(r.get("nullColor"),r),m=v>0?v-1:v,g.drawRect(c,m,this.barWidth-1,0,x,x)):h;for(w=v,b=0;b<_;b++){if(S=e[b],p&&S===a){if(!W||j)continue;j=!0}l>0?u=n.floor(f*(n.abs(S-a)/l))+1:u=1,S<a||S===a&&v===0?(m=w,w+=u):(m=v-u,v-=u),x=this.calcColor(b,S,t),i&&(x=this.calcHighlightColor(x,r)),s.push(g.drawRect(c,m,this.barWidth-1,u-1,x,x))}return s.length===1?s[0]:s}}),o.fn.sparkline.tristate=ut=k(o.fn.sparkline._base,M,{type:"tristate",init:function(t,i,e,r,a){var s=parseInt(e.get("barWidth"),10),l=parseInt(e.get("barSpacing"),10);ut._super.init.call(this,t,i,e,r,a),this.regionShapes={},this.barWidth=s,this.barSpacing=l,this.totalBarWidth=s+l,this.values=o.map(i,Number),this.width=r=i.length*s+(i.length-1)*l,o.isArray(e.get("colorMap"))?(this.colorMapByIndex=e.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=e.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===h&&(this.colorMapByValue=new J(this.colorMapByValue))),this.initTarget()},getRegion:function(t,i,e){return n.floor(i/this.totalBarWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===h,value:this.values[t],color:this.calcColor(this.values[t],t),offset:t}},calcColor:function(t,i){var e=this.values,r=this.options,a=this.colorMapByIndex,s=this.colorMapByValue,l,p;return s&&(p=s.get(t))?l=p:a&&a.length>i?l=a[i]:e[i]<0?l=r.get("negBarColor"):e[i]>0?l=r.get("posBarColor"):l=r.get("zeroBarColor"),l},renderRegion:function(t,i){var e=this.values,r=this.options,a=this.target,s,l,p,g,c,f;if(s=a.pixelHeight,p=n.round(s/2),g=t*this.totalBarWidth,e[t]<0?(c=p,l=p-1):e[t]>0?(c=0,l=p-1):(c=p-1,l=2),f=this.calcColor(e[t],t),f!==null)return i&&(f=this.calcHighlightColor(f,r)),a.drawRect(g,c,this.barWidth-1,l-1,f,f)}}),o.fn.sparkline.discrete=dt=k(o.fn.sparkline._base,M,{type:"discrete",init:function(t,i,e,r,a){dt._super.init.call(this,t,i,e,r,a),this.regionShapes={},this.values=i=o.map(i,Number),this.min=n.min.apply(n,i),this.max=n.max.apply(n,i),this.range=this.max-this.min,this.width=r=e.get("width")==="auto"?i.length*2:this.width,this.interval=n.floor(r/i.length),this.itemWidth=r/i.length,e.get("chartRangeMin")!==h&&(e.get("chartRangeClip")||e.get("chartRangeMin")<this.min)&&(this.min=e.get("chartRangeMin")),e.get("chartRangeMax")!==h&&(e.get("chartRangeClip")||e.get("chartRangeMax")>this.max)&&(this.max=e.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight=e.get("lineHeight")==="auto"?n.round(this.canvasHeight*.3):e.get("lineHeight"))},getRegion:function(t,i,e){return n.floor(i/this.itemWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===h,value:this.values[t],offset:t}},renderRegion:function(t,i){var e=this.values,r=this.options,a=this.min,s=this.max,l=this.range,p=this.interval,g=this.target,c=this.canvasHeight,f=this.lineHeight,v=c-f,m,u,x,C;return u=F(e[t],a,s),C=t*p,m=n.round(v-v*((u-a)/l)),x=r.get("thresholdColor")&&u<r.get("thresholdValue")?r.get("thresholdColor"):r.get("lineColor"),i&&(x=this.calcHighlightColor(x,r)),g.drawLine(C,m,C,m+f,x)}}),o.fn.sparkline.bullet=tt=k(o.fn.sparkline._base,{type:"bullet",init:function(t,i,e,r,a){var s,l,p;tt._super.init.call(this,t,i,e,r,a),this.values=i=X(i),p=i.slice(),p[0]=p[0]===null?p[2]:p[0],p[1]=i[1]===null?p[2]:p[1],s=n.min.apply(n,i),l=n.max.apply(n,i),e.get("base")===h?s=s<0?s:0:s=e.get("base"),this.min=s,this.max=l,this.range=l-s,this.shapes={},this.valueShapes={},this.regiondata={},this.width=r=e.get("width")==="auto"?"4.0em":r,this.target=this.$el.simpledraw(r,a,e.get("composite")),i.length||(this.disabled=!0),this.initTarget()},getRegion:function(t,i,e){var r=this.target.getShapeAt(t,i,e);return r!==h&&this.shapes[r]!==h?this.shapes[r]:h},getCurrentRegionFields:function(){var t=this.currentRegion;return{fieldkey:t.substr(0,1),value:this.values[t.substr(1)],region:t}},changeHighlight:function(t){var i=this.currentRegion,e=this.valueShapes[i],r;switch(delete this.shapes[e],i.substr(0,1)){case"r":r=this.renderRange(i.substr(1),t);break;case"p":r=this.renderPerformance(t);break;case"t":r=this.renderTarget(t);break}this.valueShapes[i]=r.id,this.shapes[r.id]=i,this.target.replaceWithShape(e,r)},renderRange:function(t,i){var e=this.values[t],r=n.round(this.canvasWidth*((e-this.min)/this.range)),a=this.options.get("rangeColors")[t-2];return i&&(a=this.calcHighlightColor(a,this.options)),this.target.drawRect(0,0,r-1,this.canvasHeight-1,a,a)},renderPerformance:function(t){var i=this.values[1],e=n.round(this.canvasWidth*((i-this.min)/this.range)),r=this.options.get("performanceColor");return t&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,n.round(this.canvasHeight*.3),e-1,n.round(this.canvasHeight*.4)-1,r,r)},renderTarget:function(t){var i=this.values[0],e=n.round(this.canvasWidth*((i-this.min)/this.range)-this.options.get("targetWidth")/2),r=n.round(this.canvasHeight*.1),a=this.canvasHeight-r*2,s=this.options.get("targetColor");return t&&(s=this.calcHighlightColor(s,this.options)),this.target.drawRect(e,r,this.options.get("targetWidth")-1,a-1,s,s)},render:function(){var t=this.values.length,i=this.target,e,r;if(tt._super.render.call(this)){for(e=2;e<t;e++)r=this.renderRange(e).append(),this.shapes[r.id]="r"+e,this.valueShapes["r"+e]=r.id;this.values[1]!==null&&(r=this.renderPerformance().append(),this.shapes[r.id]="p1",this.valueShapes.p1=r.id),this.values[0]!==null&&(r=this.renderTarget().append(),this.shapes[r.id]="t0",this.valueShapes.t0=r.id),i.render()}}}),o.fn.sparkline.pie=it=k(o.fn.sparkline._base,{type:"pie",init:function(t,i,e,r,a){var s=0,l;if(it._super.init.call(this,t,i,e,r,a),this.shapes={},this.valueShapes={},this.values=i=o.map(i,Number),e.get("width")==="auto"&&(this.width=this.height),i.length>0)for(l=i.length;l--;)s+=i[l];this.total=s,this.initTarget(),this.radius=n.floor(n.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(t,i,e){var r=this.target.getShapeAt(t,i,e);return r!==h&&this.shapes[r]!==h?this.shapes[r]:h},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===h,value:this.values[t],percent:this.values[t]/this.total*100,color:this.options.get("sliceColors")[t%this.options.get("sliceColors").length],offset:t}},changeHighlight:function(t){var i=this.currentRegion,e=this.renderSlice(i,t),r=this.valueShapes[i];delete this.shapes[r],this.target.replaceWithShape(r,e),this.valueShapes[i]=e.id,this.shapes[e.id]=i},renderSlice:function(t,i){var e=this.target,r=this.options,a=this.radius,s=r.get("borderWidth"),l=r.get("offset"),p=2*n.PI,g=this.values,c=this.total,f=l?2*n.PI*(l/360):0,v,m,u,x,C;for(x=g.length,u=0;u<x;u++){if(v=f,m=f,c>0&&(m=f+p*(g[u]/c)),t===u)return C=r.get("sliceColors")[u%r.get("sliceColors").length],i&&(C=this.calcHighlightColor(C,r)),e.drawPieSlice(a,a,a-s,v,m,h,C);f=m}},render:function(){var t=this.target,i=this.values,e=this.options,r=this.radius,a=e.get("borderWidth"),s=e.get("donutWidth"),l,p;if(it._super.render.call(this)){for(a&&t.drawCircle(r,r,n.floor(r-a/2),e.get("borderColor"),h,a).append(),p=i.length;p--;)i[p]&&(l=this.renderSlice(p).append(),this.valueShapes[p]=l.id,this.shapes[l.id]=p);s&&t.drawCircle(r,r,r-s,e.get("donutColor"),e.get("donutColor"),0).append(),t.render()}}}),o.fn.sparkline.box=et=k(o.fn.sparkline._base,{type:"box",init:function(t,i,e,r,a){et._super.init.call(this,t,i,e,r,a),this.values=o.map(i,Number),this.width=e.get("width")==="auto"?"4.0em":r,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var t=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==h&&t.push({field:"lo",value:this.loutlier}),this.routlier!==h&&t.push({field:"ro",value:this.routlier}),this.lwhisker!==h&&t.push({field:"lw",value:this.lwhisker}),this.rwhisker!==h&&t.push({field:"rw",value:this.rwhisker}),t},render:function(){var t=this.target,i=this.values,e=i.length,r=this.options,a=this.canvasWidth,s=this.canvasHeight,l=r.get("chartRangeMin")===h?n.min.apply(n,i):r.get("chartRangeMin"),p=r.get("chartRangeMax")===h?n.max.apply(n,i):r.get("chartRangeMax"),g=0,c,f,v,m,u,x,C,w,b,_,S;if(et._super.render.call(this)){if(r.get("raw"))r.get("showOutliers")&&i.length>5?(f=i[0],c=i[1],m=i[2],u=i[3],x=i[4],C=i[5],w=i[6]):(c=i[0],m=i[1],u=i[2],x=i[3],C=i[4]);else if(i.sort(function(j,W){return j-W}),m=G(i,1),u=G(i,2),x=G(i,3),v=x-m,r.get("showOutliers")){for(c=C=h,b=0;b<e;b++)c===h&&i[b]>m-v*r.get("outlierIQR")&&(c=i[b]),i[b]<x+v*r.get("outlierIQR")&&(C=i[b]);f=i[0],w=i[e-1]}else c=i[0],C=i[e-1];this.quartiles=[m,u,x],this.lwhisker=c,this.rwhisker=C,this.loutlier=f,this.routlier=w,S=a/(p-l+1),r.get("showOutliers")&&(g=n.ceil(r.get("spotRadius")),a-=2*n.ceil(r.get("spotRadius")),S=a/(p-l+1),f<c&&t.drawCircle((f-l)*S+g,s/2,r.get("spotRadius"),r.get("outlierLineColor"),r.get("outlierFillColor")).append(),w>C&&t.drawCircle((w-l)*S+g,s/2,r.get("spotRadius"),r.get("outlierLineColor"),r.get("outlierFillColor")).append()),t.drawRect(n.round((m-l)*S+g),n.round(s*.1),n.round((x-m)*S),n.round(s*.8),r.get("boxLineColor"),r.get("boxFillColor")).append(),t.drawLine(n.round((c-l)*S+g),n.round(s/2),n.round((m-l)*S+g),n.round(s/2),r.get("lineColor")).append(),t.drawLine(n.round((c-l)*S+g),n.round(s/4),n.round((c-l)*S+g),n.round(s-s/4),r.get("whiskerColor")).append(),t.drawLine(n.round((C-l)*S+g),n.round(s/2),n.round((x-l)*S+g),n.round(s/2),r.get("lineColor")).append(),t.drawLine(n.round((C-l)*S+g),n.round(s/4),n.round((C-l)*S+g),n.round(s-s/4),r.get("whiskerColor")).append(),t.drawLine(n.round((u-l)*S+g),n.round(s*.1),n.round((u-l)*S+g),n.round(s*.9),r.get("medianColor")).append(),r.get("target")&&(_=n.ceil(r.get("spotRadius")),t.drawLine(n.round((r.get("target")-l)*S+g),n.round(s/2-_),n.round((r.get("target")-l)*S+g),n.round(s/2+_),r.get("targetColor")).append(),t.drawLine(n.round((r.get("target")-l)*S+g-_),n.round(s/2),n.round((r.get("target")-l)*S+g+_),n.round(s/2),r.get("targetColor")).append()),t.render()}}}),xt=k({init:function(t,i,e,r){this.target=t,this.id=i,this.type=e,this.args=r},append:function(){return this.target.appendShape(this),this}}),rt=k({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,i,e){t&&(this.width=t,this.height=i,this.target=e,this.lastShapeId=null,e[0]&&(e=e[0]),o.data(e,"_jqs_vcanvas",this))},drawLine:function(t,i,e,r,a,s){return this.drawShape([[t,i],[e,r]],a,s)},drawShape:function(t,i,e,r){return this._genShape("Shape",[t,i,e,r])},drawCircle:function(t,i,e,r,a,s){return this._genShape("Circle",[t,i,e,r,a,s])},drawPieSlice:function(t,i,e,r,a,s,l){return this._genShape("PieSlice",[t,i,e,r,a,s,l])},drawRect:function(t,i,e,r,a,s){return this._genShape("Rect",[t,i,e,r,a,s])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(t,i){o(i).html(t)},_calculatePixelDims:function(t,i,e){var r;r=this._pxregex.exec(i),r?this.pixelHeight=r[1]:this.pixelHeight=o(e).height(),r=this._pxregex.exec(t),r?this.pixelWidth=r[1]:this.pixelWidth=o(e).width()},_genShape:function(t,i){var e=yt++;return i.unshift(e),new xt(this,e,t,i)},appendShape:function(t){alert("appendShape not implemented")},replaceWithShape:function(t,i){alert("replaceWithShape not implemented")},insertAfterShape:function(t,i){alert("insertAfterShape not implemented")},removeShapeId:function(t){alert("removeShapeId not implemented")},getShapeAt:function(t,i,e){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),st=k(rt,{init:function(t,i,e,r){st._super.init.call(this,t,i,e),this.canvas=R.createElement("canvas"),e[0]&&(e=e[0]),o.data(e,"_jqs_vcanvas",this),o(this.canvas).css({display:"inline-block",width:t,height:i,verticalAlign:"top"}),this._insert(this.canvas,e),this._calculatePixelDims(t,i,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=r,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=h,o(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(t,i,e){var r=this.canvas.getContext("2d");return t!==h&&(r.strokeStyle=t),r.lineWidth=e===h?1:e,i!==h&&(r.fillStyle=i),r},reset:function(){var t=this._getContext();t.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=h},_drawShape:function(t,i,e,r,a){var s=this._getContext(e,r,a),l,p;for(s.beginPath(),s.moveTo(i[0][0]+.5,i[0][1]+.5),l=1,p=i.length;l<p;l++)s.lineTo(i[l][0]+.5,i[l][1]+.5);e!==h&&s.stroke(),r!==h&&s.fill(),this.targetX!==h&&this.targetY!==h&&s.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawCircle:function(t,i,e,r,a,s,l){var p=this._getContext(a,s,l);p.beginPath(),p.arc(i,e,r,0,2*n.PI,!1),this.targetX!==h&&this.targetY!==h&&p.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t),a!==h&&p.stroke(),s!==h&&p.fill()},_drawPieSlice:function(t,i,e,r,a,s,l,p){var g=this._getContext(l,p);g.beginPath(),g.moveTo(i,e),g.arc(i,e,r,a,s,!1),g.lineTo(i,e),g.closePath(),l!==h&&g.stroke(),p&&g.fill(),this.targetX!==h&&this.targetY!==h&&g.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawRect:function(t,i,e,r,a,s,l){return this._drawShape(t,[[i,e],[i+r,e],[i+r,e+a],[i,e+a],[i,e]],s,l)},appendShape:function(t){return this.shapes[t.id]=t,this.shapeseq.push(t.id),this.lastShapeId=t.id,t.id},replaceWithShape:function(t,i){var e=this.shapeseq,r;for(this.shapes[i.id]=i,r=e.length;r--;)e[r]==t&&(e[r]=i.id);delete this.shapes[t]},replaceWithShapes:function(t,i){var e=this.shapeseq,r={},a,s,l;for(s=t.length;s--;)r[t[s]]=!0;for(s=e.length;s--;)a=e[s],r[a]&&(e.splice(s,1),delete this.shapes[a],l=s);for(s=i.length;s--;)e.splice(l,0,i[s].id),this.shapes[i[s].id]=i[s]},insertAfterShape:function(t,i){var e=this.shapeseq,r;for(r=e.length;r--;)if(e[r]===t){e.splice(r+1,0,i.id),this.shapes[i.id]=i;return}},removeShapeId:function(t){var i=this.shapeseq,e;for(e=i.length;e--;)if(i[e]===t){i.splice(e,1);break}delete this.shapes[t]},getShapeAt:function(t,i,e){return this.targetX=i,this.targetY=e,this.render(),this.currentTargetShapeId},render:function(){var t=this.shapeseq,i=this.shapes,e=t.length,r=this._getContext(),a,s,l;for(r.clearRect(0,0,this.pixelWidth,this.pixelHeight),l=0;l<e;l++)a=t[l],s=i[a],this["_draw"+s.type].apply(this,s.args);this.interact||(this.shapes={},this.shapeseq=[])}}),at=k(rt,{init:function(t,i,e){var r;at._super.init.call(this,t,i,e),e[0]&&(e=e[0]),o.data(e,"_jqs_vcanvas",this),this.canvas=R.createElement("span"),o(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:i,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,e),this._calculatePixelDims(t,i,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,r='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",r),this.group=o(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(t,i,e,r,a){var s=[],l,p,g,c,f,v,m;for(m=0,v=i.length;m<v;m++)s[m]=""+i[m][0]+","+i[m][1];return l=s.splice(0,1),a=a===h?1:a,p=e===h?' stroked="false" ':' strokeWeight="'+a+'px" strokeColor="'+e+'" ',g=r===h?' filled="false"':' fillColor="'+r+'" filled="true" ',c=s[0]===s[s.length-1]?"x ":"",f='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+p+g+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+l+" l "+s.join(", ")+" "+c+'e"> </v:shape>',f},_drawCircle:function(t,i,e,r,a,s,l){var p,g,c;return i-=r,e-=r,p=a===h?' stroked="false" ':' strokeWeight="'+l+'px" strokeColor="'+a+'" ',g=s===h?' filled="false"':' fillColor="'+s+'" filled="true" ',c='<v:oval  id="jqsshape'+t+'" '+p+g+' style="position:absolute;top:'+e+"px; left:"+i+"px; width:"+r*2+"px; height:"+r*2+'px"></v:oval>',c},_drawPieSlice:function(t,i,e,r,a,s,l,p){var g,c,f,v,m,u,x,C;if(a===s)return"";if(s-a===2*n.PI&&(a=0,s=2*n.PI),c=i+n.round(n.cos(a)*r),f=e+n.round(n.sin(a)*r),v=i+n.round(n.cos(s)*r),m=e+n.round(n.sin(s)*r),c===v&&f===m){if(s-a<n.PI)return"";c=v=i+r,f=m=e}return c===v&&f===m&&s-a<n.PI?"":(g=[i-r,e-r,i+r,e+r,c,f,v,m],u=l===h?' stroked="false" ':' strokeWeight="1px" strokeColor="'+l+'" ',x=p===h?' filled="false"':' fillColor="'+p+'" filled="true" ',C='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+u+x+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+i+","+e+" wa "+g.join(", ")+' x e"> </v:shape>',C)},_drawRect:function(t,i,e,r,a,s,l){return this._drawShape(t,[[i,e],[i,e+a],[i+r,e+a],[i+r,e],[i,e]],s,l)},reset:function(){this.group.innerHTML=""},appendShape:function(t){var i=this["_draw"+t.type].apply(this,t.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",i):this.prerender+=i,this.lastShapeId=t.id,t.id},replaceWithShape:function(t,i){var e=o("#jqsshape"+t),r=this["_draw"+i.type].apply(this,i.args);e[0].outerHTML=r},replaceWithShapes:function(t,i){var e=o("#jqsshape"+t[0]),r="",a=i.length,s;for(s=0;s<a;s++)r+=this["_draw"+i[s].type].apply(this,i[s].args);for(e[0].outerHTML=r,s=1;s<t.length;s++)o("#jqsshape"+t[s]).remove()},insertAfterShape:function(t,i){var e=o("#jqsshape"+t),r=this["_draw"+i.type].apply(this,i.args);e[0].insertAdjacentHTML("afterEnd",r)},removeShapeId:function(t){var i=o("#jqsshape"+t);this.group.removeChild(i[0])},getShapeAt:function(t,i,e){var r=t.id.substr(8);return r},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})})(document,Math);$(document).ready(function(){var R=function(){var o=["#3bc0c3","#4489e4"],y=$("#sparkline1").data("colors");y&&(o=y.split(",")),$("#sparkline1").sparkline([42,48,56,45,60,58,42,40,60],{type:"line",width:"100%",height:"165",chartRangeMax:50,lineColor:o[0],fillColor:nt(o[0],.3),highlightLineColor:"rgba(0,0,0,.1)",highlightSpotColor:"rgba(0,0,0,.2)",maxSpotColor:!1,minSpotColor:!1,spotColor:!1,lineWidth:1}),$("#sparkline1").sparkline([35,55,48,45,58,62,42,52,32],{type:"line",width:"100%",height:"165",chartRangeMax:40,lineColor:o[1],fillColor:nt(o[1],.3),composite:!0,highlightLineColor:"rgba(0,0,0,.1)",highlightSpotColor:"rgba(0,0,0,.2)",maxSpotColor:!1,minSpotColor:!1,spotColor:!1,lineWidth:1});var o=["#3bc0c3"],y=$("#sparkline2").data("colors");y&&(o=y.split(",")),$("#sparkline2").sparkline([8,14,16,12,18,20,10,14,22,12,14,10,14,16,13,16],{type:"bar",height:"165",barWidth:"10",barSpacing:"3",barColor:o});var o=["#3bc0c3","#4489e4","#d03f3f","#716cb0"],y=$("#sparkline3").data("colors");y&&(o=y.split(",")),$("#sparkline3").sparkline([20,15,20,5],{type:"pie",width:"165",height:"165",sliceColors:o});var o=["#3bc0c3","#716cb0"],y=$("#sparkline4").data("colors");y&&(o=y.split(",")),$("#sparkline4").sparkline([5,48,30,40,49,50,62,42,44],{type:"line",width:"100%",height:"165",chartRangeMax:50,lineColor:o[0],fillColor:"transparent",lineWidth:2,highlightLineColor:"rgba(0,0,0,.1)",highlightSpotColor:"rgba(0,0,0,.2)",maxSpotColor:!1,minSpotColor:!1,spotColor:!1}),$("#sparkline4").sparkline([3,24,25,35,40,45,42,24,42],{type:"line",width:"100%",height:"165",chartRangeMax:40,lineColor:o[1],fillColor:"transparent",composite:!0,lineWidth:2,maxSpotColor:!1,minSpotColor:!1,spotColor:!1,highlightLineColor:"rgba(0,0,0,1)",highlightSpotColor:"rgba(0,0,0,1)"});var o=["#f2f2f7","#3bc0c3"],y=$("#sparkline6").data("colors");y&&(o=y.split(",")),$("#sparkline6").sparkline([3,6,7,8,6,4,7,10,12,7,4,9,12,13,11,12],{type:"line",width:"100%",height:"165",lineColor:o[0],lineWidth:2,fillColor:"rgba(227,234,239,0.3)",highlightLineColor:"rgba(0,0,0,.1)",highlightSpotColor:"rgba(0,0,0,.2)"}),$("#sparkline6").sparkline([3,6,7,8,6,4,7,10,12,7,4,9,12,13,11,12],{type:"bar",height:"165",barWidth:"10",barSpacing:"5",composite:!0,barColor:o[1]});var o=["#33b0e0"],y=$("#sparkline7").data("colors");y&&(o=y.split(",")),$("#sparkline7").sparkline([8,12,14,14,8,6,4,2,8,8,10,12,6,8,10,16,14,12,18,6,4,8,2,10,12,8,6,14],{type:"discrete",width:"280",height:"165",lineColor:o});var o=["#3bc0c3","#4489e4"],y=$("#sparkline8").data("colors");y&&(o=y.split(",")),$("#sparkline8").sparkline([12,14,16,12,9],{type:"bullet",width:"280",height:"80",targetColor:o[0],performanceColor:o[1]});var o=["#3bc0c3","#1a2942","#d1d7d973"],y=$("#sparkline9").data("colors");y&&(o=y.split(",")),$("#sparkline9").sparkline([8,42,36,49,56,50,70,66,98,92,75,89,90,89,100],{type:"box",width:"280",height:"80",boxLineColor:o[0],boxFillColor:"transparent",whiskerColor:o[1],medianColor:o[1],targetColor:o[1]});var o=["#3bc0c3","#1a2942","#d1d7d973"],y=$("#sparkline10").data("colors");y&&(o=y.split(",")),$("#sparkline10").sparkline([1,1,0,1,-1,-1,1,-1,0,0,1,1],{height:"80",width:"100%",type:"tristate",posBarColor:o[0],negBarColor:o[1],zeroBarColor:o[2],barWidth:8,barSpacing:3,zeroAxis:!1})},n=function(){var o=500,y=-1,K=-1,k,I=0,F=[],G=30;$("html").mousemove(function(X){var N=X.pageX,D=X.pageY;y>-1&&(I+=Math.max(Math.abs(N-y),Math.abs(D-K))),y=N,K=D});var O=function(){var X=new Date,N=X.getTime();if(k&&k!=N){var D=Math.round(I/(N-k)*1e3);F.push(D),F.length>G&&F.splice(0,1),I=0;var Y=["#f1556c"],U=$("#sparkline5").data("colors");U&&(Y=U.split(",")),$("#sparkline5").sparkline(F,{tooltipSuffix:" pixels per second",type:"line",width:"100%",height:"165",chartRangeMax:77,maxSpotColor:!1,minSpotColor:!1,spotColor:!1,lineWidth:1,lineColor:Y,fillColor:nt(Y[0],.3),highlightLineColor:"rgba(24,147,126,.1)",highlightSpotColor:"rgba(24,147,126,.2)"})}k=N,setTimeout(O,o)};setTimeout(O,o)};R(),n();var h;$(window).resize(function(o){clearTimeout(h),h=setTimeout(function(){R(),n()},300)})});function nt(R,n){var h=parseInt(R.slice(1,3),16),o=parseInt(R.slice(3,5),16),y=parseInt(R.slice(5,7),16);return n?"rgba("+h+", "+o+", "+y+", "+n+")":"rgb("+h+", "+o+", "+y+")"}
